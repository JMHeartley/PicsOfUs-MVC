@using PicsOfUs.Models
@model BrowseIndexViewModel
@{
    ViewBag.Title = "Browse";
}

<div class="row">
    <div class="col-md-4">
        <button class="btn btn-primary d-md-none" type="button" data-toggle="collapse" data-target="#search-form" aria-expanded="false">Filters</button>
        @using (Html.BeginForm("Index", "Browse", FormMethod.Post, new { @class = "max-vh-100 scroll-y-no-bar collapse", id = "search-form" }))
        {
            <h4>Date</h4>
            <div class="input-group input-daterange mb-3" data-provide="datepicker">
                <div class="input-group-prepend">
                    <span class="input-group-text">From</span>
                </div>
                @Html.TextBoxFor(m => m.SearchForm.CaptureDateFrom, "{0:MM/dd/yyyy}", new { @class = "form-control" })
            </div>
            <div class="input-group input-daterange mb-3" data-provide="datepicker">
                <div class="input-group-prepend">
                    <span class="input-group-text">To</span>
                </div>
                @Html.TextBoxFor(m => m.SearchForm.CaptureDateTo, "{0:MM/dd/yyyy}", new { @class = "form-control" })
            </div>

            <h4>People</h4>
            <div class="overflow-auto mb-1 px-3 member-select-overflow border border-light rounded">
                @Html.EditorFor(m => m.SearchForm.PicSubjects)
            </div>

            <div class="form-group">
                @Html.CheckBoxFor(m => m.SearchForm.RequireAll, new { @class = "mr-1" })
                @Html.LabelFor(m => m.SearchForm.RequireAll)
            </div>

            <button type="submit" class="btn btn-primary">Search</button>
        }
    </div>
    <div class="col-md-8">
        <div class="d-flex flex-wrap p-2 vh-100 overflow-auto" id="results-body">
            @if (Model.ResultPics == null)
            {
                <p>Press <i>Search</i> to begin reminiscing...</p>
            }
            else if (!Model.ResultPics.Any())
            {
                <p>There are no pics to matching that search...</p>
            }
            else
            {
                for (var i = 0; i < Model.ResultPics.Count(); i++)
                {
                    <div class="pic-result trigger m-2" data-result-id="@i" data-pic-id="@Model.ResultPics[i].Id">
                        <img src="@Model.ResultPics[i].Url" alt="@Model.ResultPics[i].Caption" class="image-fluid" />
                    </div>
                }
            }
        </div>
    </div>
</div>

<div class="row no-gutters hidden scroll-y-no-bar vh-100 vw-100" id="lightbox">

    <div class="vh-100 vw-100 text-center hidden" id="loader">
        <div id="loader-image">
            <div class="progress w-50">
                <div class="progress-bar progress-bar-striped progress-bar-animated w-100" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="1"></div>
            </div>
        </div>
    </div>
    <div class="col-12 col-lg-8 d-flex justify-content-center vh-100">
        <div class="p-2" id="lightbox-closer-x">
            <div class="text-center">
                <i class="far fa-times-circle"></i>
                <span class="d-none d-lg-block user-select-none font-weight-normal">ESC</span>
            </div>
        </div>
        <div id="left-arrow">
            <i class="fas fa-arrow-left" aria-hidden="true"></i>
        </div>
        <img src="" alt="" id="lightbox-pic" class="image-fluid">
        <div id="right-arrow">
            <i class="fas fa-arrow-right" aria-hidden="true"></i>
        </div>
    </div>
    <div id="lightbox-details" class="col-12 col-lg-4 pt-3 px-3 d-flex">
        <h3 id="caption" class="font-weight-bolder">
            <!--Caption!-->
        </h3>
        <p id="capture-date" class="font-weight-lighter">
            <!--CaptureDate-->
        </p>
        <div class="d-flex align-items-center" id="love-pic" data-is-loved="false">
            <i class="far fa-heart mx-2" aria-hidden="true"></i>
            <span class="font-weight-normal">
                <!--IsLoved-->
            </span>
        </div>
        <div id="pic-subjects" class="my-1 p-1 d-flex flex-wrap scroll-y-no-bar">
            <!-- this is where the mini profiles go! -->
        </div>
    </div>
    <div id="member-details" class="hidden container-fluid scroll-y-no-bar">
        <div class="row no-gutters">
            <img src="" alt="profile pic" class="image-fluid" />
        </div>
        <div class="row no-gutters">
            <h4 id="member-name"></h4>
        </div>
        <div class="row no-gutters">
            <h5>Birthday</h5>
            <span id="member-birthday"></span>
        </div>
        <div class="row no-gutters">
            <h5>Parents</h5>
            <div id="member-parents"></div>
        </div>
        <div class="row no-gutters">
            <h5>Siblings</h5>
            <div id="member-siblings"></div>
        </div>
        <div class="row no-gutters">
            <h5>Children</h5>
            <div id="member-children"></div>
        </div>
    </div>
</div>